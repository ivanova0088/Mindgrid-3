<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MindGrid – شبكة العقول</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#00bcd4">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
  <div class="logo">MG</div>
  <h1>MindGrid – شبكة العقول</h1>
</header>

<main>
  <!-- اختيار/إدارة المستخدمين -->
  <section id="userSelect" class="screen active">
    <div class="card">
      <div class="row space-between">
        <h2 class="title">اختر مستخدمًا أو أضف جديدًا</h2>
        <button class="btn-primary" onclick="showScreen('addUser')">إضافة مستخدم</button>
      </div>
      <div id="userList" class="grid-3"></div>
    </div>
  </section>

  <!-- إضافة مستخدم -->
  <section id="addUser" class="screen">
    <div class="card">
      <h2 class="title">مستخدم جديد</h2>
      <div class="grid-2">
        <div><label>الاسم</label><input id="name" class="input" type="text" placeholder="اكتب اسمك"></div>
        <div>
          <label>الدولة</label>
          <input id="countryInput" class="input" list="countryList" placeholder="اختر الدولة">
          <datalist id="countryList"></datalist>
        </div>
        <div>
          <label>تاريخ الميلاد</label>
          <input id="dob" class="input" type="date">
          <div class="help">سنحسب العمر تلقائيًا من تاريخ الميلاد.</div>
        </div>
      </div>
      <div class="row end mt8">
        <button class="btn" onclick="showScreen('userSelect')">رجوع</button>
        <button class="btn-primary" onclick="goPrefs()">التالي</button>
      </div>
    </div>
  </section>

  <!-- التفضيلات -->
  <section id="prefs" class="screen">
    <div class="card">
      <h2 class="title">التفضيلات</h2>
      <div class="grid-2">
        <div>
          <label>المجالات المفضلة</label>
          <div id="topics" class="pills"></div>
        </div>
        <div>
          <label>مستوى الصعوبة</label>
          <select id="difficulty" class="select">
            <option value="سهل">سهل</option>
            <option value="متوسط">متوسط</option>
            <option value="صعب" selected>صعب</option>
          </select>
        </div>
      </div>
      <div class="row end mt8">
        <button class="btn" onclick="showScreen('userSelect')">إلغاء</button>
        <button class="btn-primary" onclick="saveUser()">حفظ وإنهاء</button>
      </div>
    </div>
  </section>

  <!-- قائمة الألعاب -->
  <section id="games" class="screen">
    <div class="card">
      <h2 class="title">اختر اللعبة</h2>
      <div class="grid-3">
        <button class="btn-primary" onclick="showCrossword()">🧩 كلمات متقاطعة</button>
        <button class="btn" onclick="showLogic()">🧠 ألغاز منطقية</button>
        <button class="btn" onclick="showWordsearch()">🔍 كلمة السر</button>
        <button class="btn" onclick="showAnagram()">🔤 ترتيب الحروف</button>
        <button class="btn" onclick="showSpeed()">⏱️ تحدي السرعة</button>
        <button class="btn" onclick="showQuiz()">📚 اختبار المعلومات</button>
        <button class="btn" onclick="showImage()">🖼️ تحدي الصور</button>
      </div>
      <div class="row mt8">
        <button class="btn" onclick="showScreen('userSelect')">تبديل المستخدم</button>
      </div>
    </div>
  </section>

  <!-- ZenFlow Crossword -->
  <section id="scrCrossword" class="screen">
    <div class="card">
      <div class="cw-topbar">
        <div class="mode-switch">
          <button id="btn9" class="active" onclick="loadCrosswordMode('standard')">9×9</button>
          <button id="btn5" onclick="loadCrosswordMode('mini')">5×5</button>
        </div>
        <div class="badges">
          <span class="badge">⏱ <span id="timer">00:00</span></span>
          <span class="badge">🪙 <span id="coins">5</span></span>
        </div>
      </div>

      <h2 class="title" id="cwTitle">كلمات متقاطعة</h2>

      <div id="cwGrid" class="cw-grid"></div>

      <div class="row center mt8">
        <button class="btn" onclick="toggleDir()">تبديل الاتجاه ↕︎</button>
        <button class="btn" onclick="checkLetter()">تحقق (حرف)</button>
        <button class="btn" onclick="checkWord()">تحقق (كلمة)</button>
        <button class="btn-primary" onclick="checkGrid()">تحقق (شبكة)</button>
      </div>

      <div class="row center mt8">
        <button id="pencilBtn" class="btn" onclick="togglePencil()">✎ وضع الرصاص</button>
        <button class="btn" onclick="revealLetter()">كشف حرف (🪙1)</button>
        <button class="btn" onclick="showScreen('games')">رجوع</button>
      </div>

      <div class="dock">
        <div class="dock-card">
          <div class="tabs">
            <div id="tabAcross" class="tab active" onclick="switchClueTab('across')">أفقي</div>
            <div id="tabDown" class="tab" onclick="switchClueTab('down')">عمودي</div>
          </div>
          <ol id="cwAcross" class="clue-list"></ol>
          <ol id="cwDown" class="clue-list" style="display:none"></ol>
          <div class="navbar">
            <button class="btn" onclick="prevClue()">◀︎ السابق</button>
            <button class="btn" onclick="nextClue()">التالي ▶︎</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- بقية الألعاب (بسيطة) -->
  <section id="scrLogic" class="screen"><div class="card game-card"><h2 class="title">لغز منطقي</h2><div id="logicQ"></div><input id="logicA" class="input" placeholder="اكتب الإجابة"><div class="row mt8"><button class="btn" onclick="showScreen('games')">رجوع</button><button class="btn-primary" onclick="checkLogic()">تحقق</button><span id="logicMsg" class="help"></span></div></div></section>

  <section id="scrWordsearch" class="screen"><div class="card game-card"><h2 class="title">كلمة السر</h2><div id="wsGrid" class="wordsearch"></div><div id="wsWords" class="row mt8"></div><div class="row mt8"><button class="btn" onclick="showScreen('games')">رجوع</button></div></div></section>

  <section id="scrAnagram" class="screen"><div class="card game-card"><h2 class="title">ترتيب الحروف</h2><div id="anaLetters" class="row"></div><input id="anaInput" class="input" placeholder="الكلمة الصحيحة"><div class="row mt8"><button class="btn" onclick="showScreen('games')">رجوع</button><button class="btn-primary" onclick="checkAnagram()">تحقق</button><span id="anaMsg" class="help"></span></div></div></section>

  <section id="scrSpeed" class="screen"><div class="card game-card"><h2 class="title">تحدي السرعة</h2><div class="row"><button class="btn-primary" onclick="startSpeed()">ابدأ</button><div>الوقت: <span id="spdTime">30</span> • النقاط: <span id="spdScore">0</span></div></div><div id="spdQ" class="mt8"></div><input id="spdA" class="input" placeholder="الإجابة"><div class="row mt8"><button class="btn" onclick="showScreen('games')">إنهاء</button><button class="btn" onclick="checkSpeed()">تحقق</button></div></div></section>

  <section id="scrQuiz" class="screen"><div class="card game-card"><h2 class="title">اختبار معلومات</h2><div id="quizQ"></div><div id="quizOptions"></div><div class="row mt8"><button class="btn" onclick="showScreen('games')">رجوع</button></div></div></section>

  <section id="scrImage" class="screen"><div class="card game-card"><h2 class="title">تحدي الصور</h2><img id="imgPic" src="" alt="" class="img"><input id="imgA" class="input mt8" placeholder="ما الموجود في الصورة؟"><div class="row mt8"><button class="btn" onclick="showScreen('games')">رجوع</button><button class="btn-primary" onclick="checkImage()">تحقق</button><span id="imgMsg" class="help"></span></div></div></section>
</main>

<script src="app.js"></script>
</body>
</html>
